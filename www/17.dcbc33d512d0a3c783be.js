(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"4Smk":function(t,i,e){"use strict";e.r(i),e.d(i,"InscriptionPageModule",function(){return L});var r=e("ofXK"),n=e("3Pt+"),o=e("TEn/"),a=e("tyNb"),s=e("Qk6J"),c=e("mrSG"),l=e("FQSO"),b=e("fXoL"),f=e("uUxy"),u=e("IEis"),d=e("3iiJ"),h=e("3/Yl"),m=e("E2f4"),p=e("S64H"),g=e("2MiI"),A=e("WGnh"),_=e("sYmb");function C(t,i){if(1&t&&(b.Ob(0),b.Qb(1,"small",10),b.uc(2),b.bc(3,"translate"),b.Pb(),b.Nb()),2&t){const t=i.$implicit;b.Ab(2),b.vc(b.cc(3,1,t))}}function v(t,i){if(1&t&&(b.Qb(0,"div"),b.sc(1,C,4,3,"ng-container",4),b.Pb()),2&t){const t=b.ac(4);b.Ab(1),b.fc("ngForOf",t.error.password.messages)}}function O(t,i){if(1&t&&(b.Qb(0,"ion-item"),b.Qb(1,"ion-label",8),b.uc(2),b.bc(3,"translate"),b.Pb(),b.Mb(4,"ion-input",9),b.sc(5,v,2,1,"div",1),b.Pb()),2&t){const t=b.ac().$implicit,i=b.ac(2);b.Ab(2),b.wc(" ",b.cc(3,6,t.label)," "),b.Ab(2),b.gc("name",t.field),b.fc("formControlName",t.field)("type",t.type)("required",t.is_required),b.Ab(1),b.fc("ngIf",null==i.error?null:i.error.password)}}function P(t,i){if(1&t&&(b.Ob(0),b.Qb(1,"small",10),b.uc(2),b.bc(3,"translate"),b.Pb(),b.Nb()),2&t){const t=i.$implicit;b.Ab(2),b.vc(b.cc(3,1,t))}}function I(t,i){if(1&t&&(b.Qb(0,"div"),b.sc(1,P,4,3,"ng-container",4),b.Pb()),2&t){const t=b.ac(4);b.Ab(1),b.fc("ngForOf",t.error.email.messages)}}function F(t,i){if(1&t&&(b.Qb(0,"ion-item"),b.Qb(1,"ion-label",8),b.uc(2),b.bc(3,"translate"),b.Pb(),b.Mb(4,"ion-input",9),b.sc(5,I,2,1,"div",1),b.Pb()),2&t){const t=b.ac().$implicit,i=b.ac(2);b.Ab(2),b.wc(" ",b.cc(3,6,t.label)," "),b.Ab(2),b.gc("name",t.field),b.fc("formControlName",t.field)("type",t.type)("required",t.is_required),b.Ab(1),b.fc("ngIf",null==i.error?null:i.error.email)}}function y(t,i){if(1&t&&(b.Qb(0,"ion-item"),b.Qb(1,"ion-label",8),b.uc(2),b.bc(3,"translate"),b.Pb(),b.Mb(4,"ion-datetime",11),b.Pb()),2&t){const t=b.ac().$implicit;b.Ab(2),b.wc(" ",b.cc(3,3,t.label)," "),b.Ab(2),b.fc("formControlName",t.field)("required",t.is_required)}}function N(t,i){if(1&t&&(b.Qb(0,"div"),b.Qb(1,"ion-item",13),b.Mb(2,"ion-checkbox",14),b.Qb(3,"ion-label"),b.uc(4),b.Pb(),b.Pb(),b.Pb()),2&t){const t=i.$implicit,e=b.ac(2).$implicit;b.Ab(2),b.fc("formControlName",e.field)("required",e.is_required),b.Ab(2),b.wc(" ",t.label," ")}}function Q(t,i){if(1&t&&(b.Qb(0,"div",12),b.sc(1,N,5,3,"div",4),b.Pb()),2&t){const t=b.ac().$implicit;b.Ab(1),b.fc("ngForOf",t.json_value)}}function E(t,i){if(1&t&&(b.Qb(0,"ion-col"),b.Qb(1,"ion-item",13),b.Qb(2,"ion-label"),b.uc(3),b.bc(4,"translate"),b.Pb(),b.Mb(5,"ion-radio",18),b.Pb(),b.Pb()),2&t){const t=i.$implicit;b.Ab(3),b.vc(b.cc(4,2,t.label)),b.Ab(2),b.fc("value",t.value)}}function M(t,i){if(1&t&&(b.Qb(0,"ion-grid"),b.Qb(1,"ion-radio-group",15),b.Qb(2,"ion-row",16),b.Qb(3,"ion-col"),b.Qb(4,"ion-item",17),b.Qb(5,"ion-label"),b.uc(6),b.bc(7,"translate"),b.Pb(),b.Pb(),b.Pb(),b.sc(8,E,6,4,"ion-col",4),b.Pb(),b.Pb(),b.Pb()),2&t){const t=b.ac().$implicit;b.Ab(1),b.fc("formControlName",t.field)("required",t.is_required),b.Ab(5),b.wc(" ",b.cc(7,4,t.label)," "),b.Ab(2),b.fc("ngForOf",t.json_value)}}function w(t,i){if(1&t&&(b.Qb(0,"div"),b.Qb(1,"ion-select-option",19),b.uc(2),b.Pb(),b.Pb()),2&t){const t=i.$implicit;b.Ab(1),b.fc("value",t.value),b.Ab(1),b.vc(t.label)}}function S(t,i){if(1&t&&(b.Qb(0,"ion-item"),b.Qb(1,"ion-label"),b.uc(2),b.bc(3,"translate"),b.Pb(),b.Qb(4,"ion-select",15),b.sc(5,w,3,2,"div",4),b.Pb(),b.Pb()),2&t){const t=b.ac().$implicit;b.Ab(2),b.wc(" ",b.cc(3,4,t.label),""),b.Ab(2),b.fc("formControlName",t.field)("required",t.is_required),b.Ab(1),b.fc("ngForOf",t.json_value)}}function $(t,i){if(1&t&&(b.Qb(0,"ion-list"),b.sc(1,O,6,8,"ion-item",1),b.sc(2,F,6,8,"ion-item",1),b.sc(3,y,5,5,"ion-item",1),b.sc(4,Q,2,1,"div",7),b.sc(5,M,9,6,"ion-grid",1),b.sc(6,S,6,6,"ion-item",1),b.Pb()),2&t){const t=i.$implicit;b.Ab(1),b.fc("ngIf","text"==t.type||"password"==t.type||"tel"==t.type||"url"==t.type),b.Ab(1),b.fc("ngIf","email"==t.type),b.Ab(1),b.fc("ngIf","date"==t.type),b.Ab(1),b.fc("ngIf","checkbox"==t.type),b.Ab(1),b.fc("ngIf","radio"==t.type),b.Ab(1),b.fc("ngIf","select"==t.type)}}function k(t,i){if(1&t){const t=b.Rb();b.Qb(0,"div"),b.Qb(1,"ratach-digit-card",2),b.Yb("result",function(i){return b.mc(t),b.ac().onDigit(i)})("onReset",function(){return b.mc(t),b.ac().resetForm()})("onChange",function(i){return b.mc(t),b.ac().hasCard=i}),b.Pb(),b.Qb(2,"form",3),b.Yb("ngSubmit",function(){return b.mc(t),b.ac().onSubmit()}),b.sc(3,$,7,6,"ion-list",4),b.Qb(4,"div",5),b.Qb(5,"ion-button",6),b.Yb("keyup.enter",function(){b.mc(t);const i=b.ac();return i.userprofileForm.valid&&i.onSubmit()}),b.uc(6),b.bc(7,"translate"),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&t){const t=b.ac();b.Ab(1),b.fc("option",t.rattachCardOption),b.Ab(1),b.fc("formGroup",t.userprofileForm),b.Ab(1),b.fc("ngForOf",t.forms),b.Ab(2),b.fc("disabled",t.userprofileForm.invalid),b.Ab(1),b.vc(b.cc(7,5,"INSCRIPTION"))}}const q=[{path:"",component:(()=>{class t{constructor(t,i,e,r,n,o,a,s){this.api=t,this._formBuilder=i,this.alert=e,this.toast=r,this.load=n,this.storage=o,this.translate=a,this.nav=s,this.item={},this.is_ready=!1,this.forms=[],this.hasCard=!1,this.rattachCardOption={choice:!0,found:!1},this.card_rattach=null}ngOnInit(){this.LoadData()}LoadData(){return Object(c.a)(this,void 0,void 0,function*(){this.forms=[],yield this.load.show(),this.api.getForms().then(t=>{this._form=t,this.userprofileForm=this.creatForm(t),this.is_ready=!0,this.load.hide()})})}resetForm(){this._form.map(t=>{this.userprofileForm.controls[t.field].setValue(t.default_value),this.userprofileForm.controls[t.field].setErrors(null)}),this.userprofileForm.updateValueAndValidity(),this.rattachCardOption={choice:!0,found:!1}}creatForm(t){let i={};return t.map(t=>{if(t){const e=new l.a(t);this.forms.push(e),i[e.field]=e.is_required?new n.c("email"===e.type?this.item[e.field]?this.item[e.field]:"":this.item[e.field]?this.item[e.field]:e.default_value,[n.p.required,n.p.pattern(e.pattern)]):new n.c(this.item[e.field]?this.item[e.field]:e.default_value,[])}}),this._formBuilder.group(i)}onSubmit(){return Object(c.a)(this,void 0,void 0,function*(){const t=this.userprofileForm.value;return this.hasCard&&!this.rattachCardOption.found?(this.alert.alertConfig.message="PLEASE_FILL_YOUR_CARD_NUMBER",this.alert.alertConfig.header="MESSAGE",this.alert.alertConfig.btn_ok="OKAY",void this.alert.presentAlert()):t.confidentiality?(yield this.load.show(),this.forms.forEach((i,e)=>{this.forms[e].value=t[i.field]}),void this.api.postCustomer(this.forms,this.card_rattach).then(t=>Object(c.a)(this,void 0,void 0,function*(){this.storage.setUser(t),this.nav.navigateRoot(["tabs/home"]),this.load.hide(),this.userprofileForm.reset(),this.notif_update()}),t=>{this.error=t.error,this.load.hide()})):(this.alert.alertConfig.message="ACCEPT_CONDITION",this.alert.alertConfig.header="MESSAGE",this.alert.alertConfig.btn_ok="OKAY",void this.alert.presentAlert())})}onDigit(t=null){if(t){const i=`\n        <p><b>${this.translate.translate("FIRSTNAME")}<b> : ${t.firstname}</p>\n        <p><b>${this.translate.translate("FORM_PR\xc9NOM_0")}<b> : ${t.lastname}</p>\n        <p><b>${this.translate.translate("FORM_EMAIL_2")}<b> : ${t.email}</p>\n        <p><b>${this.translate.translate("FORM_DATE_DE_NAISSANCE_4")}<b> : ${t.birthday}</p>\n        `;this.alert.alertConfig.message=i,this.alert.alertConfig.subHeader="PLEASE_CONFIRM_YOUR_INFORMATION",this.alert.alertConfig.header="INFO",this.alert.alertConfig.btn_ok="I_CONFIRM",this.alert.alertConfig.btn_cancel="NOT_ME",this.alert.presentConfirm().then(i=>{this.rattachCardOption={choice:!0,found:!0};const e={};Object.keys(t).forEach(i=>{this._form.map(r=>{r.field===i&&(e[i]=t[i],this.userprofileForm.patchValue(e))})}),this.card_rattach=t.card}).catch(t=>{this.card_rattach=null,this.rattachCardOption={choice:!0,found:!1}})}else this.card_rattach=null,this.alert.alertConfig.message="DIGIT_CARD_INFO_NOT_FOUND",this.alert.alertConfig.header="MESSAGE",this.alert.alertConfig.btn_ok="OKAY",this.alert.presentAlert()}notif_success(){this.toast.message="INSCRIPTION_EVENT",this.toast.color="success",this.toast.AlertMessage()}notif_update(){this.toast.message="UPDATE_COMPTE",this.toast.color="success",this.toast.AlertMessage()}}return t.\u0275fac=function(i){return new(i||t)(b.Lb(f.a),b.Lb(n.b),b.Lb(u.a),b.Lb(d.a),b.Lb(h.a),b.Lb(m.a),b.Lb(p.a),b.Lb(o.ab))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-inscription"]],decls:3,vars:2,consts:[[3,"title"],[4,"ngIf"],[3,"option","result","onReset","onChange"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"btn"],["type","submit","color","primary",3,"disabled","keyup.enter"],["class","check",4,"ngIf"],["position","stacked"],[3,"name","formControlName","type","required"],[1,"error-message"],["displayFormat","DD/MM/YYYY","cancelText","Annuler","doneText","Ok",3,"formControlName","required"],[1,"check"],["lines","none"],["mode","ios","slot","start",3,"formControlName","required"],[3,"formControlName","required"],[1,"ion-align-items-center","ion-justify-content-center"],["lines","none",1,"item-no-padding"],["slot","end",3,"value"],[3,"value"]],template:function(t,i){1&t&&(b.Mb(0,"app-header",0),b.Qb(1,"ion-content"),b.sc(2,k,8,7,"div",1),b.Pb()),2&t&&(b.fc("title","BUTTON_INSCRIPTION"),b.Ab(2),b.fc("ngIf",i.is_ready))},directives:[g.a,o.p,r.l,A.a,n.q,n.l,n.g,r.k,o.h,o.z,o.x,o.y,o.w,o.eb,n.k,n.e,n.o,o.q,o.db,o.n,o.c,o.s,o.F,o.J,o.o,o.E,o.cb,o.L,o.M],pipes:[_.b],styles:[".check[_ngcontent-%COMP%]{margin-top:10px}"]}),t})(),canActivate:[s.a]}];let R=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({imports:[[a.i.forChild(q)],a.i]}),t})();var T=e("iWjc");let L=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({imports:[[r.c,n.h,o.W,n.n,R,_.a.forChild(),T.a]]}),t})()}}]);